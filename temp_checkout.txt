    const handleCheckout = async () => {
    setIsProcessing(true);

    try {
      // Despertar el backend antes de crear el pedido
      setCheckoutMessage('Preparando pedido...');
      try {
        await fetch('https://backup-librio-backend.onrender.com/health');
        await new Promise(resolve => setTimeout(resolve, 1000)); // Esperar 1 segundo adicional
      } catch (e) {
        console.log('Backend despertando...');
      }

      const result = await pedidosService.crearPedido(cart);

      if (result.success) {
        setCheckoutMessage("¡Compra realizada con éxito! Tu pedido ha sido registrado.");
        clearCart();
        setTimeout(() => setCheckoutMessage(''), 5000);
      } else {
        console.error('Error del servidor:', result.error);
        setCheckoutMessage(`Error: ${result.error || 'No se pudo procesar el pedido'}`);
      }
    } catch (error) {
      console.error('Error al procesar el pedido:', error);
      setCheckoutMessage('Error de red. Por favor, intenta nuevamente.');
    } finally {
      setIsProcessing(false);
    }
  };
